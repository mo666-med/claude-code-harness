# Claude Worker Profile
# Claude Code 上で実装・テスト・レビューを行うエージェントプロファイル

id: claude-worker
client: claude-code
description: "Claude Code 上で実装・テスト・レビューを行うエージェントプロファイル"

# このプロファイルが担当するフェーズと使用するワークフロー
roles:
  - phase: work
    workflow: default
    description: "実装・コード生成"
  - phase: review
    workflow: default
    description: "コードレビュー・品質チェック"
  - phase: sync-status
    workflow: default
    description: "進捗状況の確認・報告"

# このプロファイルで使用可能なスキル
skills:
  categories:
    include:
      - core         # 基本原則、リポジトリ読み取り
      - worker       # 実装、テスト、レビュー
      - ci           # CI 失敗分析・修正
    exclude: []      # 必要に応じて pm も使用可能

# Plans.md でのマーカー（日本語・英語両方を認識）
markers:
  todo:
    - "cc:TODO"
  wip:
    - "cc:WIP"
  done:
    - "cc:完了"
    - "cc:done"

# 制約事項
constraints:
  # 本番デプロイは禁止
  no_production_deploy: true
  # staging デプロイまでは許可
  allow_staging_deploy: true
  # claude-code-harness.config.json の設定に従う
  respect_config: true

# エラー回復設定
error_recovery:
  # 自動リトライ回数
  max_retries: 3
  # 失敗時は Cursor（PM）にエスカレーション
  escalate_to: cursor-pm

# ハンドオフ設定
handoff:
  # 作業完了を Cursor に報告するコマンド
  to_pm: "/handoff-to-pm-claude"
  # PM からタスクを受け取り状況を確認するコマンド
  from_pm: "/sync-status"

# セーフティ設定（claude-code-harness.config.json の設定を優先）
safety:
  # デフォルトの動作モード
  default_mode: "apply-local"
  # 確認が必要な操作
  require_confirmation:
    - git_commit
    - git_push
    - destructive_commands

# 出力スタイル
output_style:
  # 技術詳細を含める
  include_technical_details: true
  # 次のアクションを提示
  always_suggest_next: true
  # 変更ファイルを報告
  report_changed_files: true
