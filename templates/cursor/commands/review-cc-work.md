---
description: Claude Codeの作業をレビューし、承認/修正指示をハンドオフ
---

# /review-cc-work

あなたは **Cursor (PM)** です。Claude Code からの完了報告（/handoff-to-cursor の出力）を受け取り、変更をレビューしてください。

**重要**: レビュー後、承認/修正どちらの場合も **Hand off to Claude** を生成します。

## 手順

### Step 1: レビュー実施

1. 変更ファイル/差分の要点を把握（`git diff` または完了報告から）
2. 受入条件に照らして判定
3. 品質・セキュリティ・パフォーマンス観点でチェック
4. **Evals の確認**: Plans.md の「評価（Evals）」に基づく検証（テスト/ログ/ベンチ等）が提示されているか、結果が妥当か確認

### Step 2: 判定

| 判定 | 条件 | 次のアクション |
|------|------|---------------|
| **approve** | 受入条件を満たす | Plans.md の該当タスクを `pm:確認済` に変更 → 次タスク分析 → ハンドオフ生成 |
| **request_changes** | 修正が必要 | 修正指示をまとめる → ハンドオフ生成 |

### Step 3: ハンドオフ生成（必須）

どちらの場合も、Claude Code に渡すハンドオフメッセージを生成してください。

---

## 出力フォーマット

### 判定サマリー

```
## レビュー結果

**判定**: approve / request_changes
**理由**:
- （1〜3点）

**Plans.md 更新**:
- `[タスク名]` → `pm:確認済` に変更（approveの場合）
```

### Hand off to Claude（必ず出力）

#### approve の場合

@Plans.md から次の `cc:TODO` または `pm:依頼中` タスクを分析し、以下を生成：

~~~markdown
## 依頼

前回のタスクは承認済みです。次のタスクを実装してください。

### 対象タスク
- （Plans.md から次タスクを抽出）

### 背景
- 前タスク完了により着手可能になった
- （依存関係があれば記載）

### 制約
- 既存のコードスタイルに従う
- 変更は必要最小限
- テスト/ビルドが通ることを確認

### 受入条件
- （3〜5個、具体的に）

### 参考
- 関連ファイル（あれば）

完了後は `/handoff-to-cursor` で報告してください。
~~~

#### request_changes の場合

修正指示を含むハンドオフを生成：

~~~markdown
## 修正依頼

レビューの結果、以下の修正が必要です。

### 修正対象タスク
- （Plans.md の該当タスク）

### 指摘事項
1. **[重要度: 高/中/低]** 指摘内容
   - 該当箇所: `ファイル名:行番号`
   - 期待する修正: 具体的な対応方法

2. **[重要度: 高/中/低]** 指摘内容
   - 該当箇所:
   - 期待する修正:

### 制約
- 既存のテストを壊さないこと
- 指摘箇所以外は変更しないこと

### 受入条件（修正後）
- 上記指摘がすべて解消されていること
- テスト/ビルドが通ること
- （追加条件があれば）

完了後は `/handoff-to-cursor` で報告してください。
~~~

---

## ワークフロー図

```
Claude Code 完了報告
        ↓
  /review-cc-work
        ↓
   ┌────┴────┐
   ↓         ↓
approve   request_changes
   ↓         ↓
pm:確認済   修正指示作成
   ↓         ↓
次タスク分析  ハンドオフ生成
   ↓         ↓
ハンドオフ生成    ↓
   ↓         ↓
   └────┬────┘
        ↓
  Claude Code へ貼り付け
        ↓
     /work 実行
```
