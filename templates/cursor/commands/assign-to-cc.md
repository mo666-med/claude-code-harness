---
description: Claude Code への作業依頼プロンプトを生成します。Claude Code の起動は行いません。
---

# Claude Code への作業依頼プロンプト生成

**重要**: このコマンドは指示プロンプトを生成するのみです。Claude Code の起動はユーザーが手動で行います。

## 実行内容

1. **Plans.md の現状確認**
2. **作業規模の判定**（4ファイル以上 or 100行超 → Claude Code）
3. **作業依頼プロンプトの生成**
4. **コピー用プロンプトの出力**

---

## 出力フォーマット

以下の形式で指示プロンプトを生成してください：

```markdown
# Claude Code 作業指示

## 作業概要
$ARGUMENTS

## 環境情報
- staging: {{STAGING_URL}}
- 本番: {{PRODUCTION_URL}}（デプロイ禁止）

## 事前準備
1. CLAUDE.md を確認（責務範囲・CI失敗対応）
2. Plans.md の該当タスクを確認
3. `git status -sb` で変更状況を確認

## 作業項目
[Plans.md の該当タスクから抽出]

## 完了条件
- [ ] 実装完了
- [ ] コミット（規約準拠: feat:/fix:/docs:等）
- [ ] プッシュ完了
- [ ] CI通過（失敗時は自動修正、3回失敗でエスカレーション）
- [ ] staging自動デプロイ完了

## コミットメッセージ規約
- `feat:` - 新機能
- `fix:` - バグ修正
- `docs:` - ドキュメント
- `refactor:` - リファクタリング

## CI失敗時の対応
1. `gh run list` でCI状況確認
2. `gh run view <run_id> --log` でエラー確認
3. 修正 → 再コミット → CI再実行
4. **3回失敗したらCursorにエスカレーション**

## 完了後
`/handoff-to-cursor` を実行して完了報告を生成してください。
```

---

## Cursor の動作

1. Plans.md から該当タスクの詳細を抽出
2. 作業規模を判定（4ファイル以上 or 100行超）
3. 上記フォーマットで指示プロンプトを生成
4. **プロンプトをチャットに出力して終了**（Claude Code は起動しない）

---

## 使用例

```
/assign-to-cc "認証機能の実装"
```

→ 指示プロンプトが出力される
→ ユーザーが手動で Claude Code を起動
→ ユーザーがプロンプトをコピー＆ペースト

---

## 注意事項

- **Claude Code の自動起動は行わない**
- プロンプト生成後、ユーザーが手動で Claude Code を起動する
- 3ファイル以下・100行以内の作業はCursorで実装することを推奨
