---
description: 2エージェントワークフローの基本ルール
alwaysApply: true
---

# 2-Agent Workflow Rules

このプロジェクトは **Cursor ↔ Claude Code** の2エージェントワークフローを採用しています。

## 役割分担

| エージェント | 責務 |
|-------------|------|
| **Cursor (PM)** | 計画・レビュー・意思決定・本番デプロイ |
| **Claude Code (Worker)** | 実装・テスト・コミット・Staging |

## タスク管理

- タスクは `Plans.md` で一元管理
- マーカーでステータスを追跡:
  - `cursor:依頼中` → Cursor から依頼
  - `cc:WIP` → Claude Code 作業中
  - `cc:完了` → Claude Code 完了
  - `cursor:確認済` → Cursor レビュー完了

## ハンドオフプロトコル

### Cursor → Claude Code
1. Plans.md にタスクを記載し `cursor:依頼中` マーカー
2. `/handoff-to-claude` でコピー可能な形式を出力
3. Claude Code へ貼り付け

### Claude Code → Cursor
1. 作業完了後 `cc:完了` マーカーを付与
2. `/handoff-to-cursor` でサマリーを出力
3. Cursor へ貼り付けてレビュー依頼

## 禁止事項

- ❌ 開発用ファイルの外部公開（CLAUDE.md, AGENTS.md, Plans.md）
- ❌ 明示的な依頼なしの大規模リファクタリング
- ❌ テストなしの機能追加
- ❌ 本番環境への直接デプロイ（Cursor PM の承認必須）
