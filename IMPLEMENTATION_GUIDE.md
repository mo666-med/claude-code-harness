# Claude harness - 実装ガイド

このガイドは、**VibeCoder**（技術的理解のある非エンジニア）が、claude-code-harnessを使ってクライアントプロジェクトを効率的に遂行するための実践的な手順を提供します。

## 目次

1. [はじめに](#はじめに)
2. [セットアップ](#セットアップ)
3. [基本的なワークフロー](#基本的なワークフロー)
4. [フェーズ別ガイド](#フェーズ別ガイド)
5. [トラブルシューティング](#トラブルシューティング)
6. [ベストプラクティス](#ベストプラクティス)

---

## はじめに

### このハーネスの目的

claude-code-harnessは、1人でフルスタッククライアントプロジェクトを遂行するVibeCoderのために設計された開発ハーネスです。プロジェクトの計画から納品まで、全ライフサイクルをClaude Codeと共に効率的に進めることができます。

### 対象ユーザー

- **VibeCoder**: 技術的な理解はあるが、プログラミングが本業ではない方
- **フリーランス開発者**: 1人でクライアントプロジェクトを受託する方
- **スタートアップ創業者**: 技術的なプロトタイプを素早く作りたい方

### 前提条件

- Claude Codeがインストールされていること
- 基本的なコマンドライン操作の知識
- GitとGitHubの基本的な理解

---

## セットアップ

### 1. プラグインのインストール

#### 方法A: GitHubから直接インストール（推奨）

```bash
# リポジトリをクローン
git clone https://github.com/Chachamaru127/claude-code-harness.git

# Claude Codeでプロジェクトを開く
cd your-project
claude
```

#### 方法B: ローカルマーケットプレイス経由

```bash
# マーケットプレイスディレクトリを作成
mkdir -p ~/claude-plugins
cd ~/claude-plugins

# プラグインをクローン
git clone https://github.com/Chachamaru127/claude-code-harness.git

# プロジェクトでClaude Codeを起動
cd ~/your-project
# プラグイン導入済みなら:
claude
#
# （ローカルにクローンしたプラグインを明示して起動する場合）
claude --plugin-dir ~/claude-plugins/claude-code-harness
```

### 2. 動作確認

プラグインが正しくインストールされたか確認：

```bash
# テストを実行
cd claude-code-harness
./tests/validate-plugin.sh
```

期待される出力：
```
✓ 全てのテストに合格しました！
```

---

## 基本的なワークフロー

### VibeCoder向け開発フロー

```
1. クライアントからの依頼
   ↓
2. /plan でプロジェクト計画作成
   ↓
3. /work で機能実装
   ↓
4. /harness-review でコードレビュー
   ↓
5. /validate で納品前検証
   ↓
6. 納品
```

### 推奨する作業の進め方

1. **計画フェーズ（1-2時間）**
   - `/plan-with-agent` でクライアント要件を整理
   - 見積もりと納期を確定

2. **実装フェーズ（プロジェクトによる）**
   - `/component` でUI実装
   - `/auth` で認証実装
   - `/crud` でデータ操作実装
   - `/payments` で決済実装（必要に応じて）

3. **デプロイフェーズ（30分-1時間）**
   - `/ci-setup` でCI/CD設定
   - `/deploy-setup` で自動デプロイ設定

4. **品質保証フェーズ（1-2時間）**
   - `/harness-review` でコード品質チェック
   - `/auto-fix` で自動修正
   - `/validate` で最終検証

5. **運用準備フェーズ（30分）**
   - `/analytics` でアクセス解析設定
   - `/feedback` でフィードバック機能追加

---

## フェーズ別ガイド

### フェーズ1: 計画

#### `/plan-with-agent` - プロジェクト計画の作成

**使用タイミング**: クライアントから依頼を受けた直後

**実行例**:
```
/plan
```

Claude Codeが以下を生成します：
- クライアント向け提案書
- 技術仕様書
- 見積もり
- スケジュール

**成果物**:
- `docs/proposal.md` - クライアント向け提案書
- `docs/technical-spec.md` - 技術仕様
- `Plans.md` - 実装計画

**次のステップ**: クライアントに提案書を送付し、承認を得る

---

### フェーズ2: フロントエンド実装

#### `/component` - UIコンポーネントの実装

**使用タイミング**: デザインが確定した後

**実行例**:
```
/component
```

Claude Codeが以下を実装します：
- shadcn/uiコンポーネントの統合
- レスポンシブデザイン
- アクセシビリティ対応

**ポイント**:
- デザインのスクリーンショットやFigmaリンクを用意
- 必要なコンポーネントをリストアップ

#### `/work` - 機能実装

**使用タイミング**: 計画に基づいて機能を実装する時

**実行例**:
```
/work
```

**ポイント**:
- `Plans.md`に実装する機能を明記
- 1つの機能ごとに実行するとスムーズ

---

### フェーズ3: バックエンド実装

#### `/auth` - 認証の実装

**使用タイミング**: ユーザー登録・ログインが必要な時

**実行例**:
```
/auth
```

**選択肢**:
- Clerk（推奨）: 簡単、UI付き
- Supabase Auth: データベースと統合

#### `/crud` - データ操作の実装

**使用タイミング**: データベース操作が必要な時

**実行例**:
```
/crud
```

Claude Codeが以下を生成します：
- APIエンドポイント
- バリデーション
- 認可チェック

#### `/payments` - 決済の実装

**使用タイミング**: 課金機能が必要な時

**実行例**:
```
/payments
```

**前提条件**:
- Stripeアカウント作成済み
- 料金プランが決定済み

---

### フェーズ4: CI/CD設定

#### `/ci-setup` - CI/CD設定

**使用タイミング**: コードが安定してきた時

**実行例**:
```
/ci-setup
```

**成果物**:
- `.github/workflows/` - GitHub Actions設定
- 自動テスト
- 自動ビルド

#### `/deploy-setup` - デプロイ設定

**使用タイミング**: 本番環境にデプロイする準備ができた時

**実行例**:
```
/deploy-setup
```

**選択肢**:
- Vercel（推奨）: Next.js最適化
- Netlify: 静的サイト向け

---

### フェーズ5: 品質保証と納品

#### `/harness-review` - コードレビュー

**使用タイミング**: 実装が完了した時

**実行例**:
```
/harness-review
```

Claude Codeが以下をチェック：
- セキュリティ
- パフォーマンス
- コード品質
- アクセシビリティ

#### `/auto-fix` - 自動修正

**使用タイミング**: レビューで問題が見つかった時

**実行例**:
```
/auto-fix
```

#### `/validate` - 納品前検証

**使用タイミング**: クライアントに納品する直前

**実行例**:
```
/validate
```

**チェック項目**:
- 全機能が動作するか
- パフォーマンスは十分か
- セキュリティ対策は万全か
- ドキュメントは揃っているか

---

## トラブルシューティング

### よくある問題と解決方法

#### 1. コマンドが認識されない

**症状**: `/plan-with-agent` などのコマンドが動作しない

**解決方法**:
```bash
# プラグインが正しくロードされているか確認
claude --help | grep plan

# プラグイン導入済みならそのまま起動
claude

# （開発中などでプラグインディレクトリを指定して起動したい場合）
claude --plugin-dir /path/to/claude-code-harness
```

#### 2. スキルが呼び出されない

**症状**: コマンドを実行してもスキルが使われない

**解決方法**:
- コマンドファイル内のスキル参照を確認
- `skills/`ディレクトリが存在するか確認
- スキルのフロントマターが正しいか確認

#### 3. フックが動作しない

**症状**: セッション開始時の自動処理が実行されない

**解決方法**:
```bash
# hooks.jsonの妥当性を確認
jq empty hooks/hooks.json

# スクリプトに実行権限があるか確認
ls -la scripts/*.sh
```

#### 4. テストが失敗する

**症状**: `./tests/validate-plugin.sh` が失敗する

**解決方法**:
```bash
# jqがインストールされているか確認
which jq

# インストールされていない場合
brew install jq  # macOS
sudo apt-get install jq  # Linux
```

---

## ベストプラクティス

### 1. 計画を先に立てる

❌ **悪い例**: いきなりコードを書き始める
```
/work
（何を作るか明確でない）
```

✅ **良い例**: まず計画を立てる
```
/plan
（提案書と仕様を作成）
↓
/work
（計画に基づいて実装）
```

### 2. 小さく分けて実装する

❌ **悪い例**: 全機能を一度に実装
```
/work
全機能を一度に実装してください
```

✅ **良い例**: 機能ごとに分けて実装
```
/work
まずユーザー登録機能を実装
↓
/work
次にプロフィール編集機能を実装
```

### 3. こまめにレビューする

❌ **悪い例**: 全実装後に1回だけレビュー
```
（全実装完了）
↓
/harness-review
（大量の問題が見つかる）
```

✅ **良い例**: 機能ごとにレビュー
```
/work（機能A実装）
↓
/harness-review（機能Aレビュー）
↓
/work（機能B実装）
↓
/harness-review（機能Bレビュー）
```

### 4. ドキュメントを残す

✅ **重要なドキュメント**:
- `README.md` - プロジェクト概要
- `docs/proposal.md` - クライアント向け提案
- `docs/technical-spec.md` - 技術仕様
- `Plans.md` - 実装計画と進捗

### 5. バージョン管理を活用する

```bash
# 機能ごとにコミット
git add .
git commit -m "feat: ユーザー登録機能を実装"

# 定期的にプッシュ
git push origin main
```

---

## 次のステップ

1. **チュートリアルを試す**: サンプルプロジェクトで各コマンドを試してみる
2. **小さなプロジェクトから始める**: 簡単なクライアントプロジェクトで実践
3. **コミュニティに参加**: GitHubのIssuesで質問や提案を共有

---

## サポート

- **GitHub Issues**: https://github.com/Chachamaru127/claude-code-harness/issues
- **ドキュメント**: README.mdを参照
- **公式ドキュメント**: https://code.claude.com/docs

---

**著者**: Manus AI & Chachamaru  
**バージョン**: 2.0.0  
**最終更新**: 2025年12月12日
