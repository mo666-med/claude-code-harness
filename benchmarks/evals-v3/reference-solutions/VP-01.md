# Reference Solution: VP-01 (ユーザー管理機能の曖昧な依頼)

## 元のプロンプト

「ユーザーのログイン情報とか管理するやつ作って、データはサーバに保存してね。あとセキュリティはちゃんとしてほしい」

## 曖昧さの問題点

1. **「ログイン情報」の定義不明**: ユーザー管理なのか認証なのか
2. **「サーバに保存」の解釈**: DB、ファイル、セッション？
3. **「セキュリティはちゃんと」**: 具体的な要件が不明
4. **「とか」で範囲が曖昧**: 他に何が含まれるか不明

## 参照解（理想的な Plans.md）

```markdown
# Plans.md - ユーザー管理機能実装計画

## 要件確認（ユーザーへのヒアリング結果）

### 確認事項

| 項目 | ユーザーへの質問 | 回答・決定 |
|------|-----------------|-----------|
| 機能範囲 | 「ログイン機能も作る？」 | まずはユーザー情報の登録・編集・削除 |
| データ保存 | 「データはどこに保存したい？」 | とりあえず動けばOK → メモリ保存 |
| セキュリティ | 「パスワードも保存する？」 | はい → 安全に保存する仕組みを入れる |
| 「とか」の範囲 | 「他に管理したい情報は？」 | 今はユーザー名とメールだけでOK |

---

## フェーズ1: 基盤構築 `cc:TODO`

- [ ] 型定義（User, CreateUserInput, UpdateUserInput）
- [ ] ディレクトリ構造の作成

---

## フェーズ2: ビジネスロジック `cc:TODO` `[feature:tdd]`

### テストケース設計

| テストケース | 入力 | 期待出力 | 備考 |
|-------------|------|---------|------|
| ユーザー作成 | `{name, email, password}` | User | パスワードはハッシュ化 |
| 取得（存在） | 有効ID | User | パスワード除外 |
| 取得（不在） | 無効ID | null | - |
| 更新 | `{id, name}` | User | updatedAt更新 |
| 削除 | 有効ID | true | - |

---

## フェーズ3: セキュリティ実装 `cc:TODO` `[feature:security]`

### セキュリティ対策

- [ ] パスワードハッシュ化（bcrypt）
- [ ] 入力バリデーション
- [ ] パスワードをレスポンスから除外
- [ ] エラーメッセージの情報漏洩防止

---

## フェーズ4: 統合テスト `cc:TODO`

- [ ] ビルド確認
- [ ] 全テスト実行
```

## 評価ポイント

### 必須要素

1. ✅ 「ログイン情報」の解釈を明確化
2. ✅ データ保存方式の決定
3. ✅ セキュリティ要件の具体化
4. ✅ テストケース表
5. ✅ `[feature:security]` マーカー
