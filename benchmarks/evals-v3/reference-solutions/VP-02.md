# Reference Solution: VP-02 (ログイン画面の曖昧な依頼)

## 元のプロンプト

「ログイン画面つくって！シンプルでいいけどTwitterとかGoogleでもログインできるようにして、あとメールでも入れるようにして。全部対応ね。デザインはいい感じにして」

## 曖昧さの問題点

1. **「シンプル」と「全部対応」が矛盾**: OAuth + メール認証は「シンプル」ではない
2. **「いい感じ」が主観的**: デザイン要件が不明確
3. **認証方式の理解不足**: OAuth の複雑さを知らずに要求
4. **技術的な難易度を理解していない**: 複数認証の実装コスト

## 参照解（理想的な Plans.md）

```markdown
# Plans.md - ログイン画面実装計画

## 要件確認（ユーザーへのヒアリング結果）

### 矛盾の解消

| 矛盾点 | ユーザーへの質問 | 回答・決定 |
|--------|-----------------|-----------|
| シンプル vs 全部対応 | 「まずはどれから対応したい？」 | メール認証を先に、ソーシャルは後で追加 |
| デザイン | 「参考にしたいサイトある？」 | シンプルな白背景でOK |

### 決定事項

- **Phase 1**: メール認証のみ（シンプルを優先）
- **Phase 2**: Google OAuth 追加（将来）
- **Phase 3**: Twitter OAuth 追加（将来）

---

## フェーズ1: 基盤構築 `cc:TODO`

- [ ] 認証ライブラリ選定（Clerk / NextAuth / 自前）
- [ ] プロジェクト構造作成
- [ ] 型定義（LoginForm, User）

---

## フェーズ2: メール認証実装 `cc:TODO` `[feature:security]`

### セキュリティ要件

- [ ] パスワードハッシュ化（bcrypt）
- [ ] CSRF トークン
- [ ] レート制限
- [ ] 入力バリデーション

### テストケース設計 `[feature:tdd]`

| テストケース | 入力 | 期待出力 | 備考 |
|-------------|------|---------|------|
| 正常ログイン | 有効なメール/パスワード | 成功 + リダイレクト | - |
| 無効なメール | 存在しないメール | エラーメッセージ | 情報漏洩防止 |
| 無効なパスワード | 間違ったパスワード | エラーメッセージ | - |
| 空入力 | 空文字 | バリデーションエラー | - |

---

## フェーズ3: UI実装 `cc:TODO`

### デザイン仕様

- 白背景、センター配置
- フォーム: メール、パスワード、ログインボタン
- エラー表示: フォーム上部に赤文字
- レスポンシブ対応

---

## フェーズ4: 統合・検証 `cc:TODO`

- [ ] ビルド確認
- [ ] E2E テスト
- [ ] セキュリティチェック
```

## 評価ポイント

### 必須要素

1. ✅ 「シンプル vs 全部対応」の矛盾を解消
2. ✅ 認証方式の優先度を決定
3. ✅ セキュリティ要件の具体化
4. ✅ テストケース表
5. ✅ `[feature:security]` マーカー
6. ✅ `[feature:tdd]` マーカー
