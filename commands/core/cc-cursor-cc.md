---
description: ""
description-en: ""
---

# /cc-cursor-cc - 計画検証ラウンドトリップ

Claude Code で壁打ちした内容を **Cursor (PM)** に送って計画の実現可能性を検証し、Cursor が Plans.md を更新した後、Claude Code に戻ってくるまでの一連のフローを支援します。

## こう言えばOK

- 「**壁打ちした内容をCursorで検証して**」→ このコマンド
- 「**計画が現実的か確認したい**」→ Cursorで実現可能性チェック
- 「**PM（Cursor）にレビューしてもらいたい**」→ 検証依頼文を生成

## できること（成果物）

- **Cursor向け検証依頼文** - `/plan-with-cc` で使える形式で出力
- **Plans.md の事前準備** - 壁打ち内容を仮タスクとして整理
- **ハンドオフ待ち状態の明示** - Claude Code が何を待っているか明確化

---

## ⚠️ 前提条件

このコマンドは **2エージェント運用** を前提としています。

| 役割 | 担当 | 説明 |
|------|------|------|
| **PM** | Cursor | 計画の検証、Plans.md の更新 |
| **Impl** | Claude Code | 壁打ち、実装 |

**2エージェント設定がまだの場合**: まず `/2agent` を実行してセットアップしてください。

---

## 実行フロー

### Step 1: 壁打ちコンテキストの抽出

**直近の会話から以下を抽出**:

1. **やりたいこと**（機能・目的）
2. **話し合った技術選択**（言語、フレームワーク、ライブラリ）
3. **決まったこと**（合意事項）
4. **未決事項**（まだ決まっていないこと）
5. **懸念点**（リスク、課題）

**抽出結果をユーザーに確認**:

> 📝 **壁打ちの内容をまとめました**
>
> **やりたいこと**: {{要約}}
> **技術選択**: {{技術スタック}}
> **決まったこと**:
> - {{合意1}}
> - {{合意2}}
> **未決事項**:
> - {{未決1}}
> **懸念点**:
> - {{懸念1}}
>
> この内容で Cursor に送りますか？

**回答を待つ**

---

### Step 2: Plans.md への仮タスク追加

壁打ち内容を **仮タスク** として Plans.md に追加します。

```markdown
## 🟠 検証中: {{プロジェクト名}} `pm:検証待ち`

> ⚠️ このセクションは Claude Code での壁打ち内容です。
> Cursor (PM) で実現可能性を検証し、タスク分解してください。

### 背景
- （壁打ちで話した背景・目的）

### 仮タスク（検証対象）
- [ ] {{仮タスク1}} `検証待ち`
- [ ] {{仮タスク2}} `検証待ち`
- [ ] {{仮タスク3}} `検証待ち`

### 技術選択（案）
- {{技術1}}: （選定理由）
- {{技術2}}: （選定理由）

### 未決事項
- {{未決1}} → **PM判断を求める**
- {{未決2}} → **PM判断を求める**

### 懸念点
- {{懸念1}}
```

---

### Step 3: Cursor向け検証依頼文の生成

以下のフォーマットで **Cursor にコピペする依頼文** を生成します：

```markdown
---
## 📋 計画検証依頼（Claude Code → Cursor）

Claude Code で壁打ちした内容の実現可能性を検証してください。

### 検証依頼内容

**やりたいこと**:
{{要約}}

**壁打ちで出た仮タスク**:
1. {{仮タスク1}}
2. {{仮タスク2}}
3. {{仮タスク3}}

**技術選択（案）**:
- {{技術スタック}}

**未決事項（PM判断を求める）**:
- {{未決1}}
- {{未決2}}

**懸念点**:
- {{懸念1}}

---

### ✅ Cursor (PM) に依頼すること

1. **実現可能性の検証**
   - 仮タスクが技術的に実現可能か
   - 見落としている前提条件がないか

2. **タスク分解**
   - 仮タスクを実装可能な粒度に分解
   - 依存関係・順序を整理

3. **未決事項の判断**
   - 上記の未決事項について決定

4. **Plans.md の更新**
   - `pm:検証待ち` → `cc:TODO` に変更
   - 分解したタスクを追記

---

### 📤 検証完了後

Plans.md の更新が完了したら、`/handoff-to-claude` を実行して
Claude Code への依頼文を生成してください。

---
```

---

### Step 4: ユーザーへの次のアクション案内

> ✅ **検証依頼文を生成しました！**
>
> **次にやること**:
>
> 1. 上の依頼文を **Cursor** にコピー＆ペースト
> 2. Cursor で `/plan-with-cc` を実行（または直接レビュー）
> 3. Cursor が Plans.md を更新
> 4. Cursor が `/handoff-to-claude` を実行
> 5. 生成された依頼文を **Claude Code** にコピー＆ペースト
>
> **待機状態**: Claude Code は Cursor からのハンドオフを待っています。
>
> 💡 **ヒント**: Cursor での検証が終わったら「検証終わったよ」と言ってください。

---

## 出力例

### 例: タスク管理アプリの壁打ち後

```
ユーザー: /cc-cursor-cc

Claude Code:
> 📝 壁打ちの内容をまとめました
>
> **やりたいこと**: Notion風のタスク管理アプリ
> **技術選択**: Next.js + Supabase + TailwindCSS
> **決まったこと**:
> - カンバン表示が必須
> - タグ機能も欲しい
> **未決事項**:
> - リアルタイム同期は必要か？
> **懸念点**:
> - ドラッグ&ドロップの実装が複雑かも

ユーザー: OK

Claude Code:
（Plans.md に仮タスクを追加）
（Cursor向け検証依頼文を生成）

> ✅ 検証依頼文を生成しました！
> 次にやること: Cursor に貼り付けてください...
```

---

## フロー全体図

```
┌─────────────────────────────────────────────────────────────┐
│                      Claude Code                            │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │   壁打ち    │ →  │ /cc-cursor-cc│ →  │  依頼文生成  │     │
│  └─────────────┘    └─────────────┘    └──────┬──────┘     │
│                                               │ コピペ     │
└───────────────────────────────────────────────┼─────────────┘
                                                ↓
┌─────────────────────────────────────────────────────────────┐
│                        Cursor (PM)                          │
│  ┌─────────────┐    ┌─────────────┐    ┌─────────────┐     │
│  │ /plan-with-cc│ →  │ Plans.md更新 │ →  │/handoff-to- │     │
│  │   で検証     │    │ (タスク分解) │    │   claude    │     │
│  └─────────────┘    └─────────────┘    └──────┬──────┘     │
│                                               │ コピペ     │
└───────────────────────────────────────────────┼─────────────┘
                                                ↓
┌─────────────────────────────────────────────────────────────┐
│                      Claude Code                            │
│  ┌─────────────┐    ┌─────────────┐                        │
│  │   /work     │ →  │    実装     │                        │
│  └─────────────┘    └─────────────┘                        │
└─────────────────────────────────────────────────────────────┘
```

---

## 関連コマンド

| コマンド | 役割 | 担当 |
|---------|------|------|
| `/plan-with-agent` | ソロモードでの計画作成 | Claude Code |
| `/plan-with-cc` | 計画の検証・分解 | Cursor |
| `/handoff-to-claude` | Claude Code への依頼文生成 | Cursor |
| `/handoff-to-cursor` | Cursor への完了報告 | Claude Code |
| `/work` | タスク実装 | Claude Code |

---

## 注意事項

- **2エージェント運用専用**: ソロモードでは `/plan-with-agent` を使用してください
- **コピペが必要**: 現状、Claude Code と Cursor は直接連携できないため、手動でのコピペが必要です
- **Plans.md の同期**: 両方が同じ Plans.md を参照していることを確認してください
