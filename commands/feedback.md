---
description: "[ã‚ªãƒ—ã‚·ãƒ§ãƒ³] ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†æ©Ÿèƒ½ã®å®Ÿè£…"
---

# /feedback - ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯åé›†æ©Ÿèƒ½ã®å®Ÿè£…

ã‚¢ãƒ—ãƒªå†…ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒ ã‚’å®Ÿè£…ã—ã¾ã™ã€‚

**æ©Ÿèƒ½**:
- âœ… ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒ 
- âœ… ãƒã‚°å ±å‘Š
- âœ… æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
- âœ… æº€è¶³åº¦èª¿æŸ»

---

## ä½¿ç”¨ã™ã‚‹ã‚¹ã‚­ãƒ«

ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ä»¥ä¸‹ã®ã‚¹ã‚­ãƒ«ã‚’æ´»ç”¨ã—ã¾ã™ï¼š

- `ccp-work-impl-feature` - ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½å®Ÿè£…
- `ccp-verify-build` - ãƒ“ãƒ«ãƒ‰æ¤œè¨¼

---

## ğŸ’¡ ãƒã‚¤ãƒ–ã‚³ãƒ¼ãƒ€ãƒ¼å‘ã‘ã®ä½¿ã„æ–¹

**ã“ã®ã‚³ãƒãƒ³ãƒ‰ã¯ã€ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã‚„ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‹ã‚‰ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’åé›†ã™ã‚‹æ©Ÿèƒ½ã‚’ç°¡å˜ã«è¿½åŠ ã§ãã¾ã™ã€‚**

- âœ… ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å£°ã‚’ç›´æ¥åé›†
- âœ… ãƒã‚°ã‚’æ—©æœŸç™ºè¦‹
- âœ… æ©Ÿèƒ½æ”¹å–„ã®ãƒ’ãƒ³ãƒˆã‚’å–å¾—
- âœ… ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«æ”¹å–„ææ¡ˆã‚’æç¤º

**å—è¨—é–‹ç™ºã§é‡è¦**: ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã«ã€Œãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å£°ã‚’èã„ã¦ã„ã‚‹ã€ã“ã¨ã‚’ã‚¢ãƒ”ãƒ¼ãƒ«ã§ãã¾ã™

---

## ä½¿ã„æ–¹

```
/feedback
```

â†’ åŸºæœ¬çš„ãªãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒ ã‚’å®Ÿè£…

```
/feedback full
```

â†’ ãƒã‚°å ±å‘Šã€æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€æº€è¶³åº¦èª¿æŸ»ã‚’å«ã‚€å®Œå…¨ç‰ˆ

---

## å®Ÿè¡Œãƒ•ãƒ­ãƒ¼

### Step 1: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚¿ã‚¤ãƒ—ã®ç¢ºèª

ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å…¥åŠ›ã‚’ç¢ºèªã€‚å…¥åŠ›ãŒãªã„å ´åˆã¯è³ªå•ï¼š

> ğŸ¯ **ã©ã®ã‚¿ã‚¤ãƒ—ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½ã‚’å®Ÿè£…ã—ã¾ã™ã‹ï¼Ÿ**
>
> 1. åŸºæœ¬ï¼ˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒ ã®ã¿ï¼‰
> 2. å®Œå…¨ç‰ˆï¼ˆãƒã‚°å ±å‘Šã€æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆã€æº€è¶³åº¦èª¿æŸ»ï¼‰
>
> ç•ªå·ã§ç­”ãˆã¦ãã ã•ã„ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: 2ï¼‰

**å›ç­”ã‚’å¾…ã¤**

---

## åŸºæœ¬ç‰ˆã®å®Ÿè£…

### Step 2: ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒ ã®ä½œæˆ

#### `components/feedback-form.tsx`

```typescript
'use client'

import { useState } from 'react'
import { Button } from '@/components/ui/button'
import { Textarea } from '@/components/ui/textarea'
import { Label } from '@/components/ui/label'
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from '@/components/ui/dialog'
import { MessageSquare } from 'lucide-react'

export function FeedbackForm() {
  const [feedback, setFeedback] = useState('')
  const [loading, setLoading] = useState(false)
  const [submitted, setSubmitted] = useState(false)

  const handleSubmit = async (e: React.FormEvent) => {
    e.preventDefault()
    setLoading(true)

    try {
      const res = await fetch('/api/feedback', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ feedback }),
      })

      if (res.ok) {
        setSubmitted(true)
        setFeedback('')
      } else {
        alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ')
      }
    } catch (error) {
      console.error('Feedback error:', error)
      alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ')
    } finally {
      setLoading(false)
    }
  }

  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button variant="outline" size="icon">
          <MessageSquare className="h-4 w-4" />
        </Button>
      </DialogTrigger>
      <DialogContent>
        <DialogHeader>
          <DialogTitle>ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ä¿¡</DialogTitle>
          <DialogDescription>
            ã”æ„è¦‹ãƒ»ã”è¦æœ›ã‚’ãŠèã‹ã›ãã ã•ã„
          </DialogDescription>
        </DialogHeader>

        {submitted ? (
          <div className="py-8 text-center">
            <p className="text-lg font-semibold text-green-600">
              âœ… ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ä¿¡ã—ã¾ã—ãŸ
            </p>
            <p className="mt-2 text-sm text-muted-foreground">
              ã”å”åŠ›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™
            </p>
          </div>
        ) : (
          <form onSubmit={handleSubmit} className="space-y-4">
            <div>
              <Label htmlFor="feedback">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</Label>
              <Textarea
                id="feedback"
                value={feedback}
                onChange={(e) => setFeedback(e.target.value)}
                placeholder="ã”æ„è¦‹ãƒ»ã”è¦æœ›ã‚’ãŠèã‹ã›ãã ã•ã„"
                rows={5}
                required
              />
            </div>

            <Button type="submit" className="w-full" disabled={loading}>
              {loading ? 'é€ä¿¡ä¸­...' : 'é€ä¿¡'}
            </Button>
          </form>
        )}
      </DialogContent>
    </Dialog>
  )
}
```

### Step 3: APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã®ä½œæˆ

#### `app/api/feedback/route.ts`

```typescript
import { NextRequest, NextResponse } from 'next/server'
import { auth } from '@clerk/nextjs/server'

export async function POST(req: NextRequest) {
  try {
    const { userId } = await auth()
    const { feedback } = await req.json()

    // ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã«ä¿å­˜
    // await prisma.feedback.create({
    //   data: {
    //     userId,
    //     feedback,
    //     createdAt: new Date(),
    //   },
    // })

    // ã¾ãŸã¯ã€ãƒ¡ãƒ¼ãƒ«é€ä¿¡
    // await sendEmail({
    //   to: 'feedback@example.com',
    //   subject: 'New Feedback',
    //   text: feedback,
    // })

    console.log('Feedback received:', { userId, feedback })

    return NextResponse.json({ success: true })
  } catch (error) {
    console.error('Feedback error:', error)
    return NextResponse.json({ error: 'ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼' }, { status: 500 })
  }
}
```

---

## å®Œå…¨ç‰ˆã®å®Ÿè£…

### Step 2: å®Œå…¨ç‰ˆãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒ ã®ä½œæˆ

#### `components/feedback-dialog.tsx`

```typescript
'use client'

import { useState } from 'react'
import { Button } from '@/components/ui/button'
import { Textarea } from '@/components/ui/textarea'
import { Label } from '@/components/ui/label'
import { Input } from '@/components/ui/input'
import {
  Select,
  SelectContent,
  SelectItem,
  SelectTrigger,
  SelectValue,
} from '@/components/ui/select'
import {
  Dialog,
  DialogContent,
  DialogDescription,
  DialogHeader,
  DialogTitle,
  DialogTrigger,
} from '@/components/ui/dialog'
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs'
import { MessageSquare, Bug, Lightbulb, Star } from 'lucide-react'

export function FeedbackDialog() {
  const [loading, setLoading] = useState(false)
  const [submitted, setSubmitted] = useState(false)

  const handleSubmit = async (type: string, data: any) => {
    setLoading(true)

    try {
      const res = await fetch('/api/feedback', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify({ type, ...data }),
      })

      if (res.ok) {
        setSubmitted(true)
      } else {
        alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ')
      }
    } catch (error) {
      console.error('Feedback error:', error)
      alert('é€ä¿¡ã«å¤±æ•—ã—ã¾ã—ãŸ')
    } finally {
      setLoading(false)
    }
  }

  return (
    <Dialog>
      <DialogTrigger asChild>
        <Button variant="outline">
          <MessageSquare className="mr-2 h-4 w-4" />
          ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
        </Button>
      </DialogTrigger>
      <DialogContent className="max-w-2xl">
        <DialogHeader>
          <DialogTitle>ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</DialogTitle>
          <DialogDescription>
            ã”æ„è¦‹ãƒ»ã”è¦æœ›ã‚’ãŠèã‹ã›ãã ã•ã„
          </DialogDescription>
        </DialogHeader>

        {submitted ? (
          <div className="py-8 text-center">
            <p className="text-lg font-semibold text-green-600">
              âœ… ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’é€ä¿¡ã—ã¾ã—ãŸ
            </p>
            <p className="mt-2 text-sm text-muted-foreground">
              ã”å”åŠ›ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™
            </p>
          </div>
        ) : (
          <Tabs defaultValue="feedback">
            <TabsList className="grid w-full grid-cols-4">
              <TabsTrigger value="feedback">
                <MessageSquare className="mr-2 h-4 w-4" />
                ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
              </TabsTrigger>
              <TabsTrigger value="bug">
                <Bug className="mr-2 h-4 w-4" />
                ãƒã‚°å ±å‘Š
              </TabsTrigger>
              <TabsTrigger value="feature">
                <Lightbulb className="mr-2 h-4 w-4" />
                æ©Ÿèƒ½ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
              </TabsTrigger>
              <TabsTrigger value="rating">
                <Star className="mr-2 h-4 w-4" />
                æº€è¶³åº¦
              </TabsTrigger>
            </TabsList>

            <TabsContent value="feedback">
              <FeedbackTab onSubmit={(data) => handleSubmit('feedback', data)} loading={loading} />
            </TabsContent>

            <TabsContent value="bug">
              <BugReportTab onSubmit={(data) => handleSubmit('bug', data)} loading={loading} />
            </TabsContent>

            <TabsContent value="feature">
              <FeatureRequestTab onSubmit={(data) => handleSubmit('feature', data)} loading={loading} />
            </TabsContent>

            <TabsContent value="rating">
              <RatingTab onSubmit={(data) => handleSubmit('rating', data)} loading={loading} />
            </TabsContent>
          </Tabs>
        )}
      </DialogContent>
    </Dialog>
  )
}

function FeedbackTab({ onSubmit, loading }: { onSubmit: (data: any) => void; loading: boolean }) {
  const [feedback, setFeedback] = useState('')

  return (
    <form onSubmit={(e) => { e.preventDefault(); onSubmit({ feedback }) }} className="space-y-4">
      <div>
        <Label htmlFor="feedback">ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯</Label>
        <Textarea
          id="feedback"
          value={feedback}
          onChange={(e) => setFeedback(e.target.value)}
          placeholder="ã”æ„è¦‹ãƒ»ã”è¦æœ›ã‚’ãŠèã‹ã›ãã ã•ã„"
          rows={5}
          required
        />
      </div>
      <Button type="submit" className="w-full" disabled={loading}>
        {loading ? 'é€ä¿¡ä¸­...' : 'é€ä¿¡'}
      </Button>
    </form>
  )
}

function BugReportTab({ onSubmit, loading }: { onSubmit: (data: any) => void; loading: boolean }) {
  const [title, setTitle] = useState('')
  const [description, setDescription] = useState('')
  const [severity, setSeverity] = useState('medium')

  return (
    <form onSubmit={(e) => { e.preventDefault(); onSubmit({ title, description, severity }) }} className="space-y-4">
      <div>
        <Label htmlFor="bug-title">ã‚¿ã‚¤ãƒˆãƒ«</Label>
        <Input
          id="bug-title"
          value={title}
          onChange={(e) => setTitle(e.target.value)}
          placeholder="ãƒã‚°ã®æ¦‚è¦"
          required
        />
      </div>
      <div>
        <Label htmlFor="bug-description">è©³ç´°</Label>
        <Textarea
          id="bug-description"
          value={description}
          onChange={(e) => setDescription(e.target.value)}
          placeholder="ãƒã‚°ã®è©³ç´°ã€å†ç¾æ‰‹é †ãªã©"
          rows={5}
          required
        />
      </div>
      <div>
        <Label htmlFor="severity">é‡è¦åº¦</Label>
        <Select value={severity} onValueChange={setSeverity}>
          <SelectTrigger>
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="low">ä½</SelectItem>
            <SelectItem value="medium">ä¸­</SelectItem>
            <SelectItem value="high">é«˜</SelectItem>
            <SelectItem value="critical">ç·Šæ€¥</SelectItem>
          </SelectContent>
        </Select>
      </div>
      <Button type="submit" className="w-full" disabled={loading}>
        {loading ? 'é€ä¿¡ä¸­...' : 'é€ä¿¡'}
      </Button>
    </form>
  )
}

function FeatureRequestTab({ onSubmit, loading }: { onSubmit: (data: any) => void; loading: boolean }) {
  const [title, setTitle] = useState('')
  const [description, setDescription] = useState('')
  const [priority, setPriority] = useState('medium')

  return (
    <form onSubmit={(e) => { e.preventDefault(); onSubmit({ title, description, priority }) }} className="space-y-4">
      <div>
        <Label htmlFor="feature-title">ã‚¿ã‚¤ãƒˆãƒ«</Label>
        <Input
          id="feature-title"
          value={title}
          onChange={(e) => setTitle(e.target.value)}
          placeholder="æ©Ÿèƒ½ã®æ¦‚è¦"
          required
        />
      </div>
      <div>
        <Label htmlFor="feature-description">è©³ç´°</Label>
        <Textarea
          id="feature-description"
          value={description}
          onChange={(e) => setDescription(e.target.value)}
          placeholder="æ©Ÿèƒ½ã®è©³ç´°ã€ãƒ¦ãƒ¼ã‚¹ã‚±ãƒ¼ã‚¹ãªã©"
          rows={5}
          required
        />
      </div>
      <div>
        <Label htmlFor="priority">å„ªå…ˆåº¦</Label>
        <Select value={priority} onValueChange={setPriority}>
          <SelectTrigger>
            <SelectValue />
          </SelectTrigger>
          <SelectContent>
            <SelectItem value="low">ä½</SelectItem>
            <SelectItem value="medium">ä¸­</SelectItem>
            <SelectItem value="high">é«˜</SelectItem>
          </SelectContent>
        </Select>
      </div>
      <Button type="submit" className="w-full" disabled={loading}>
        {loading ? 'é€ä¿¡ä¸­...' : 'é€ä¿¡'}
      </Button>
    </form>
  )
}

function RatingTab({ onSubmit, loading }: { onSubmit: (data: any) => void; loading: boolean }) {
  const [rating, setRating] = useState(0)
  const [comment, setComment] = useState('')

  return (
    <form onSubmit={(e) => { e.preventDefault(); onSubmit({ rating, comment }) }} className="space-y-4">
      <div>
        <Label>æº€è¶³åº¦</Label>
        <div className="flex gap-2 mt-2">
          {[1, 2, 3, 4, 5].map((star) => (
            <button
              key={star}
              type="button"
              onClick={() => setRating(star)}
              className={`text-3xl ${star <= rating ? 'text-yellow-500' : 'text-gray-300'}`}
            >
              â˜…
            </button>
          ))}
        </div>
      </div>
      <div>
        <Label htmlFor="rating-comment">ã‚³ãƒ¡ãƒ³ãƒˆï¼ˆä»»æ„ï¼‰</Label>
        <Textarea
          id="rating-comment"
          value={comment}
          onChange={(e) => setComment(e.target.value)}
          placeholder="ã”æ„è¦‹ã‚’ãŠèã‹ã›ãã ã•ã„"
          rows={3}
        />
      </div>
      <Button type="submit" className="w-full" disabled={loading || rating === 0}>
        {loading ? 'é€ä¿¡ä¸­...' : 'é€ä¿¡'}
      </Button>
    </form>
  )
}
```

---

## æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã‚’æ¡ˆå†…

> âœ… **ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½ãŒå®Œæˆã—ã¾ã—ãŸï¼**
>
> ğŸ“„ **ç”Ÿæˆã—ãŸãƒ•ã‚¡ã‚¤ãƒ«**:
> - `components/feedback-dialog.tsx` - ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ•ã‚©ãƒ¼ãƒ 
> - `app/api/feedback/route.ts` - APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ
>
> **æ¬¡ã«ã‚„ã‚‹ã“ã¨ï¼š**
> 1. ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒœã‚¿ãƒ³ã‚’è¿½åŠ 
> 2. ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹ã‚¹ã‚­ãƒ¼ãƒã‚’ä½œæˆï¼ˆPrismaï¼‰
> 3. å‹•ä½œç¢ºèª: `npm run dev`
> 4. ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å®šæœŸçš„ã«ç¢ºèª
>
> ğŸ’¡ **ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå‘ã‘**: åé›†ã—ãŸãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’å®šæœŸãƒ¬ãƒãƒ¼ãƒˆã¨ã—ã¦å…±æœ‰ã—ã¾ã—ã‚‡ã†ã€‚

---

## æ³¨æ„äº‹é …

- **ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼**: å€‹äººæƒ…å ±ã®å–ã‚Šæ‰±ã„ã«æ³¨æ„
- **ã‚¹ãƒ‘ãƒ å¯¾ç­–**: reCAPTCHAã®å°å…¥ã‚’æ¨å¥¨
- **é€šçŸ¥**: æ–°ã—ã„ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’ãƒ¡ãƒ¼ãƒ«ã§é€šçŸ¥
- **åˆ†æ**: å®šæœŸçš„ã«ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã‚’åˆ†æã—ã¦æ”¹å–„

**ã“ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æ©Ÿèƒ½ã§ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å£°ã‚’æ´»ã‹ã—ãŸæ”¹å–„ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚**
