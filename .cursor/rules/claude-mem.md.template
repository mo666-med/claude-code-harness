---
description: "Cursor Ã— Claude-mem integration: Session start protocol and task-level context search"
alwaysApply: true
---

# Cursor Ã— Claude-mem Integration Rules

## Session Start Protocol

At the beginning of each session, search past work using claude-mem MCP tools:

1. Search recent decisions and patterns
2. Review previous session context
3. Continue from where you left off

### Example Initial Prompt

"ã¾ãšéå»ã®ä½œæ¥­ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚æœ€è¿‘ã®decisionã¨patternã‚’æ¤œç´¢ã—ã€å‰å›ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®ç¶šãã‹ã‚‰å§‹ã‚ã¾ã—ã‚‡ã†ã€‚"

### Manual Search Commands

Use the MCP tools directly:
- Search recent work: Use `search` tool with query
- Get timeline: Use `timeline` tool
- Fetch details: Use `get_observations` with IDs

### Workflow

```
Session Start
    â†“
Search claude-mem for recent context
    â†“
Review past decisions/patterns
    â†“
Continue with informed context
```

### Important Notes

- **Automatic recording**: Your prompts, file edits, and session completion are automatically recorded to claude-mem via Cursor hooks
- **Manual context search**: You must manually search past context at session start (automatic injection is not possible due to Cursor limitations)
- **Project-based memory**: All records are tagged with your project name for easy filtering

### Example Queries

**Find recent decisions:**
```
Use search tool: query="decision", type="observations", obs_type="decision", limit=10
```

**Review last session:**
```
Use get_recent_context tool: limit=10
```

**Find bug fixes:**
```
Use search tool: query="bug", obs_type="bugfix", limit=5
```

### Advanced Usage

**Timeline around a specific observation:**
```
Use timeline tool: anchor=<observation_id>, depth_before=3, depth_after=3
```

**Batch fetch multiple observations:**
```
Use get_observations tool: ids=[123, 456, 789]
```

For complete documentation, see: docs/guides/cursor-mem-integration.md

## Task-Level Context Search (Conditional - Level 2)

Before starting complex tasks, search claude-mem for relevant context. This helps maintain consistency and leverage past learnings.

### When to Search

**ğŸŸ¢ Implementation Tasks** - Always search before implementing features:
- Search for similar implementations, architectural decisions, and established patterns
- Example queries:
  - `query="[feature name] implementation", obs_type="feature"`
  - `query="[technology] pattern", obs_type="decision"`
  - `query="architecture", obs_type="decision"`

**ğŸŸ¢ Bug Fixing** - Search before fixing bugs:
- Look for related bugs, previous fixes, and root cause analyses
- Example queries:
  - `query="[component] bug", obs_type="bugfix"`
  - `query="[error message]", limit=5`
  - `query="[technology] error", obs_type="bugfix"`

**ğŸŸ¢ Code Review** - Search before reviewing code:
- Find coding standards, past review comments, and quality guidelines
- Example queries:
  - `query="code review", obs_type="decision"`
  - `query="[technology] best practices", obs_type="pattern"`
  - `query="security", obs_type="guard"`

**ğŸ”´ Simple Edits** - Skip search for trivial changes:
- Typo fixes, formatting adjustments, comment updates
- Minor refactoring within a single function
- Documentation updates (unless structural changes)

### Search Strategy

1. **Check recency first**: Use `get_recent_context` to see if relevant work was done recently
2. **Keyword search**: Use specific keywords related to the task
3. **Type filtering**: Use `obs_type` to filter by observation type (feature, bugfix, decision, pattern)
4. **Limit results**: Start with `limit=5-10` to avoid overwhelming context

### Example Workflow

```
User: "Implement user authentication with JWT"
    â†“
Search: query="authentication", obs_type="decision", limit=5
Search: query="JWT", obs_type="feature", limit=5
    â†“
Review past decisions on auth approach
    â†“
Implement following established patterns
    â†“
Record implementation as new observation
```

### Performance Considerations

- **Balance**: Search adds context but costs time - use judgment
- **Skip for obvious tasks**: Don't search if you're confident about the approach
- **Batch searches**: If doing multiple related tasks, search once upfront
- **Cache insights**: Remember key findings to avoid repeated searches
