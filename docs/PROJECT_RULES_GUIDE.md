# Project Rules ガイド

`claude-code-harness`では、プロジェクト固有のルールを定義することで、開発プロセスをカスタマイズし、一貫性を保つことができます。

## 1. ルールの設定方法

プロジェクトのルートディレクトリに`.claude/rules/`ディレクトリを作成し、その中にMarkdown形式でルールファイルを配置します。

```
.claude/
└── rules/
    ├── coding-standards.md
    └── security-policy.md
```

## 2. ルールの適用条件

各ルールファイルの先頭にYAMLフロントマターを追加することで、ルールを適用するファイルパスを限定できます。

```yaml
---
paths:
  - "src/components/**/*.tsx"
  - "src/hooks/**/*.ts"
---

# Reactコンポーネントのコーディング規約

- コンポーネント名はPascalCaseで記述する
- propsはTypeScriptで型定義を必ず行う
- useEffectの依存関係配列は常に正しく設定する
```

`paths`が指定されていない場合、ルールはプロジェクト全体に適用されます。

## 3. ルールの種類

### コーディング規約 (`coding-standards.md`)

- **目的**: コードの一貫性を保ち、可読性を向上させる
- **内容**: 命名規則、フォーマット、コメントスタイルなど

### セキュリティポリシー (`security-policy.md`)

- **目的**: プロジェクト固有のセキュリティ要件を定義する
- **内容**: 使用禁止ライブラリ、認証方法、APIキーの管理方法など

### テスト方針 (`testing-policy.md`)

- **目的**: テストの品質とカバレッジを保証する
- **内容**: ユニットテストのフレームワーク、カバレッジ目標、E2Eテストの範囲など

## 4. ルールの活用

定義されたルールは、以下の場面でClaudeによって自動的に参照されます。

- **コード生成時**: `/work`コマンドでコードを生成する際に、ルールに準拠したコードが作成されます。
- **コードレビュー時**: `/harness-review`コマンドでレビューを行う際に、ルール違反がないかチェックされます。
- **エラー修正時**: エラーが発生した場合、ルールに基づいて修正案が提示されます。

## 5. ベストプラクティス

- **具体的かつ簡潔に**: ルールは具体的で、誰が読んでも理解できるように記述します。
- **段階的に導入**: 最初から厳しいルールを設けず、プロジェクトの成長に合わせて段階的に追加・更新します。
- **チームで合意**: ルールはチーム全体で合意形成を行い、全員が遵守するようにします。
